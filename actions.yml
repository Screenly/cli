# action.yml
name: 'Screenly'
description: 'GitHub Actions for Screenly.'
branding:
  icon: 'code'
  color: 'purple'
inputs:
  screenly_token:
    description: "Your Screenly API token."
    required: true
  cli_commands:
    description: "Your Screenly CLI command(s)."
    required: true
  cli_version:
    description: "Use a specific CLI version."
    required: false
    default: "v0.1.0"
runs:
  using: 'composite'
  steps:
    - id: download cli
      run: |
        wget -O /tmp/screenly-cli.tar.gz \
          "https://github.com/Screenly/cli/releases/download/${{ inputs.cli_version }}/screenly-cli-x86_64-unknown-linux-gnu.tar.gz"
        cd /tmp
        tar screenly-cli.tar.gz
        chmod +x screeenly
      shell: bash
  - id: run cli
    run: |
      export API_TOKEN=${{ inputs.screenly_token }}
      /tmp/screenly ${{ inputs.cli_commands }}
    shell: bash
